{"ast":null,"code":"import React,{useEffect,useState}from'react';import Button from'@mui/material/Button';import socket from'../services/taxi_socket';import{TextField}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Customer(props){let[pickupAddress,setPickupAddress]=useState(\"Tecnologico de Monterrey, campus Puebla, Mexico\");let[dropOffAddress,setDropOffAddress]=useState(\"Triangulo Las Animas, Puebla, Mexico\");let[msg,setMsg]=useState(\"\");useEffect(()=>{let channel=socket.channel(\"customer:\"+props.username,{token:\"123\"});channel.on(\"greetings\",data=>console.log(data));channel.on(\"booking_request\",data=>{console.log(\"Received\",data);setMsg(data.msg);});channel.join();},[props]);let submit=()=>{fetch(\"http://localhost:4000/api/bookings\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({pickup_address:pickupAddress,dropoff_address:dropOffAddress,username:props.username})}).then(resp=>resp.json()).then(data=>setMsg(data.msg));};return/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\",borderStyle:\"solid\"},children:[\"Customer: \",props.username,/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",label:\"Pickup address\",fullWidth:true,onChange:ev=>setPickupAddress(ev.target.value),value:pickupAddress}),/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",label:\"Drop off address\",fullWidth:true,onChange:ev=>setDropOffAddress(ev.target.value),value:dropOffAddress}),/*#__PURE__*/_jsx(Button,{onClick:submit,variant:\"outlined\",color:\"primary\",children:\"Submit\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:\"lightcyan\",height:\"50px\"},children:msg})]});}export default Customer;","map":{"version":3,"names":["React","useEffect","useState","Button","socket","TextField","jsx","_jsx","jsxs","_jsxs","Customer","props","pickupAddress","setPickupAddress","dropOffAddress","setDropOffAddress","msg","setMsg","channel","username","token","on","data","console","log","join","submit","fetch","method","headers","body","JSON","stringify","pickup_address","dropoff_address","then","resp","json","style","textAlign","borderStyle","children","id","label","fullWidth","onChange","ev","target","value","onClick","variant","color","backgroundColor","height"],"sources":["C:/Users/akong/OneDrive/Escritorio/S/Elixir/taxi24/taxi_fe/src/components/Customer.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport Button from '@mui/material/Button'\r\n\r\nimport socket from '../services/taxi_socket';\r\nimport { TextField } from '@mui/material';\r\n\r\nfunction Customer(props) {\r\n  let [pickupAddress, setPickupAddress] = useState(\"Tecnologico de Monterrey, campus Puebla, Mexico\");\r\n  let [dropOffAddress, setDropOffAddress] = useState(\"Triangulo Las Animas, Puebla, Mexico\");\r\n  let [msg, setMsg] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    let channel = socket.channel(\"customer:\" + props.username, {token: \"123\"});\r\n    channel.on(\"greetings\", data => console.log(data));\r\n    channel.on(\"booking_request\", data => {\r\n      console.log(\"Received\", data);\r\n      setMsg(data.msg);\r\n    });\r\n    channel.join();\r\n  },[props]);\r\n\r\n  let submit = () => {\r\n    fetch(`http://localhost:4000/api/bookings`, {\r\n      method: 'POST',\r\n      headers: {'Content-Type': 'application/json'},\r\n      body: JSON.stringify({pickup_address: pickupAddress, dropoff_address: dropOffAddress, username: props.username})\r\n    }).then(resp => resp.json()).then(data => setMsg(data.msg));\r\n  };\r\n\r\n  return (\r\n    <div style={{textAlign: \"center\", borderStyle: \"solid\"}}>\r\n      Customer: {props.username}\r\n      <div>\r\n          <TextField id=\"outlined-basic\" label=\"Pickup address\"\r\n            fullWidth\r\n            onChange={ev => setPickupAddress(ev.target.value)}\r\n            value={pickupAddress}/>\r\n          <TextField id=\"outlined-basic\" label=\"Drop off address\"\r\n            fullWidth\r\n            onChange={ev => setDropOffAddress(ev.target.value)}\r\n            value={dropOffAddress}/>\r\n        <Button onClick={submit} variant=\"outlined\" color=\"primary\">Submit</Button>\r\n      </div>\r\n      <div style={{backgroundColor: \"lightcyan\", height: \"50px\"}}>\r\n        {msg}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Customer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}