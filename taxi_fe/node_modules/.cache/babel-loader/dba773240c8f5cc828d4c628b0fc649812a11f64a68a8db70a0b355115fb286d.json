{"ast":null,"code":"import React,{useEffect,useState}from'react';import Button from'@mui/material/Button';import socket from'../services/taxi_socket';import{Card,CardContent,Typography}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Driver(props){let[message,setMessage]=useState();let[bookingId,setBookingId]=useState();let[visible,setVisible]=useState(false);useEffect(()=>{let channel=socket.channel(\"driver:\"+props.username,{token:\"123\"});channel.on(\"booking_request\",data=>{console.log(\"Received\",data);setMessage(data.msg);setBookingId(data.bookingId);setVisible(true);});channel.join();},[props]);let reply=decision=>{fetch(\"http://localhost:4000/api/bookings/\".concat(bookingId),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({action:decision,username:props.username})}).then(resp=>setVisible(false));};return/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\",borderStyle:\"solid\"},children:[\"Driver: \",props.username,/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:\"lavender\",height:\"100px\"},children:visible?/*#__PURE__*/_jsxs(Card,{variant:\"outlined\",style:{margin:\"auto\",width:\"600px\"},children:[/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(Typography,{children:message})}),/*#__PURE__*/_jsx(Button,{onClick:()=>reply(\"accept\"),variant:\"outlined\",color:\"primary\",children:\"Accept\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>reply(\"reject\"),variant:\"outlined\",color:\"secondary\",children:\"Reject\"})]}):null})]});}export default Driver;","map":{"version":3,"names":["React","useEffect","useState","Button","socket","Card","CardContent","Typography","jsx","_jsx","jsxs","_jsxs","Driver","props","message","setMessage","bookingId","setBookingId","visible","setVisible","channel","username","token","on","data","console","log","msg","join","reply","decision","fetch","concat","method","headers","body","JSON","stringify","action","then","resp","style","textAlign","borderStyle","children","backgroundColor","height","variant","margin","width","onClick","color"],"sources":["C:/Users/akong/OneDrive/Escritorio/S/Elixir/taxi24/taxi_fe/src/components/Driver.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport Button from '@mui/material/Button';\r\n\r\nimport socket from '../services/taxi_socket';\r\nimport { Card, CardContent, Typography } from '@mui/material';\r\n\r\nfunction Driver(props) {\r\n  let [message, setMessage] = useState();\r\n  let [bookingId, setBookingId] = useState();\r\n  let [visible, setVisible] = useState(false);\r\n  useEffect(() => {\r\n    let channel = socket.channel(\"driver:\" + props.username, {token: \"123\"});\r\n    channel.on(\"booking_request\", data => {\r\n      console.log(\"Received\", data);\r\n      setMessage(data.msg);\r\n      setBookingId(data.bookingId);\r\n      setVisible(true);\r\n    });\r\n    channel.join();\r\n  },[props]);\r\n\r\n  let reply = (decision) => {\r\n    fetch(`http://localhost:4000/api/bookings/${bookingId}`, {\r\n      method: 'POST',\r\n      headers: {'Content-Type': 'application/json'},\r\n      body: JSON.stringify({action: decision, username: props.username})\r\n    }).then(resp => setVisible(false));\r\n  };\r\n\r\n  return (\r\n    <div style={{textAlign: \"center\", borderStyle: \"solid\"}}>\r\n        Driver: {props.username}\r\n        <div style={{backgroundColor: \"lavender\", height: \"100px\"}}>\r\n          {\r\n            visible ?\r\n            <Card variant=\"outlined\" style={{margin: \"auto\", width: \"600px\"}}>\r\n              <CardContent>\r\n                <Typography>\r\n                {message}\r\n                </Typography>\r\n              </CardContent>\r\n              <Button onClick={() => reply(\"accept\")} variant=\"outlined\" color=\"primary\">Accept</Button>\r\n              <Button onClick={() => reply(\"reject\")} variant=\"outlined\" color=\"secondary\">Reject</Button>\r\n            </Card> :\r\n            null\r\n          }\r\n        </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Driver;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}